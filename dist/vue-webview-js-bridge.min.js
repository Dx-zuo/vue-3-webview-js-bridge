/**
 * vue-webview-js-bridge v0.0.8
 * (c) 2022 Kntt
 * @license MIT
 */
!function(e,o){"object"==typeof exports&&"undefined"!=typeof module?module.exports=o():"function"==typeof define&&define.amd?define(o):e.VueWebviewJsBridge=o()}(this,function(){"use strict";function n(e,o){if(!(e instanceof o))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e=function(e,o,n){return o&&t(e.prototype,o),n&&t(e,n),e};function t(e,o){for(var n=0;n<o.length;n++){var i=o[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var r=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var n,i=arguments[o];for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},a=(e(s,[{key:"registerHandler",value:function(e,o){}},{key:"callHandler",value:function(e,o,n){this.mockHandler(o,n)}}]),s);function s(e){if(n(this,s),"[object Function]"!==Object.prototype.toString.call(e))throw new Error("mockHandler "+(null==(o=e)?String(o):"object"===(void 0===o?"undefined":i(o))?{"[object Array]":"array","[object Date]":"date","[object RegExp]":"regexp","[object Object]":"object","[object Error]":"error"}[Object.prototype.toString.call(o)]||"object":void 0===o?"undefined":i(o))+" is not a function");var o;this.mockHandler=e}var o,c,d,l,u,f,p,w=(o={},c=navigator.userAgent,d=c.match(/(Windows Phone);?[\s\/]+([\d.]+)?/),l=c.match(/(Android);?[\s\/]+([\d.]+)?/),u=c.match(/(iPad).*OS\s([\d_]+)/),f=c.match(/(iPod)(.*OS\s([\d_]+))?/),p=!u&&c.match(/(iPhone\sOS|iOS)\s([\d_]+)/),o.ios=o.android=o.windows=o.iphone=o.ipod=o.ipad=o.androidChrome=!1,d&&(o.os="windows",o.osVersion=d[2],o.windows=!0),l&&!d&&(o.os="android",o.osVersion=l[2],o.android=!0,o.androidChrome=0<=c.toLowerCase().indexOf("chrome")),(u||p||f)&&(o.os="ios",o.ios=!0),p&&!f&&(o.osVersion=p[2].replace(/_/g,"."),o.iphone=!0),u&&(o.osVersion=u[2].replace(/_/g,"."),o.ipad=!0),f&&(o.osVersion=f[3]?f[3].replace(/_/g,"."):null,o.iphone=!0),o.ios&&o.osVersion&&0<=c.indexOf("Version/")&&"10"===o.osVersion.split(".")[0]&&(o.osVersion=c.toLowerCase().split("version/")[1].split(" ")[0]),o.iphonex=o.ios&&812===screen.height&&375===screen.width,o.webView=(p||u||f)&&c.match(/.*AppleWebKit(?!.*Safari)/i),o),b=(e(v,[{key:"init",value:function(e){var o=this.options,n=o.debug,i=o.mock,o=o.mockHandler;if(i&&o){n&&console.log("[VueJsBridge] work in mock mode...");o=new a(o);return e(o)}if(!w.android)return window.WKWebViewJavascriptBridge?e(WKWebViewJavascriptBridge):window.WKWVJBCallbacks?window.WKWVJBCallbacks.push(e):(window.WKWVJBCallbacks=[e],void window.webkit.messageHandlers.iOS_Native_InjectJavascript.postMessage(null));window.WebViewJavascriptBridge?e(window.WebViewJavascriptBridge):document.addEventListener("WebViewJavascriptBridgeReady",function(){e(window.WebViewJavascriptBridge)},!1)}},{key:"registerHandler",value:function(o,n){var e=this,i=this.options.delay;setTimeout(function(){e.init(function(e){e.registerHandler(o,n)})},i)}},{key:"callHandler",value:function(){var o=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.nativeHandlerName,n=arguments[1],i=this.options.debug,t=void 0,r=void 0,e=new Promise(function(e,o){t=e,r=o});return i&&console.info("[VueJsBridge] Start calling name:",o," with payload:",n),this.init(function(e){try{e.callHandler(o,n,function(e){i&&console.info("[VueJsBridge] Success response:",e),t(e)})}catch(e){i&&console.info("[VueJsBridge] Failed error:",e),r(e)}}),e}}]),v);function v(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};n(this,v),this.options=e}var g={debug:!0,schemaName:"yy",delay:200,nativeHandlerName:"nativeHandler",mock:!0,mockHandler:null};return{install:function(e,o){o=r({},g,o);Object.defineProperty(e.config.globalProperties,"$bridge",{value:new b(o)})},version:"0.0.8"}});